WAF.define("ChartJS",["waf-core/widget"],function(a){var b=a.create("ChartJS",{chartType:a.property({type:"enum",values:{pie:"pie",radar:"radar"},defaultValue:"pie"}),items:a.property({type:"datasource",attributes:[{name:"value"},{name:"label"}]}),verticalLines:a.property({type:"boolean",defaultValue:!1}),horizontalLines:a.property({type:"boolean",defaultValue:!1}),track:a.property({type:"boolean",defaultValue:!1}),explode:a.property({type:"integer",defaultValue:6}),init:function(){var a=this.node,b=this.items();typeof window.Designer!="undefined"&&this.render(a,this.verticalLines(),this.horizontalLines(),this.track(),this.explode()),this.chartType.onChange(function(){typeof window.Designer!="undefined"?this.render(a,this.verticalLines(),this.horizontalLines(),this.track(),this.explode()):this.items.getCollection(function(b){this.update(this.chartType(),a,b,this.verticalLines(),this.horizontalLines(),this.track(),this.explode())})}),this.track.onChange(function(){typeof window.Designer!="undefined"?this.render(a,this.verticalLines(),this.horizontalLines(),this.track(),this.explode()):this.items.getCollection(function(b){this.update(this.chartType(),a,b,this.verticalLines(),this.horizontalLines(),this.track(),this.explode())})}),this.verticalLines.onChange(function(){typeof window.Designer!="undefined"?this.render(a,this.verticalLines(),this.horizontalLines(),this.track(),this.explode()):this.items.getCollection(function(b){this.update(this.chartType(),a,b,this.verticalLines(),this.horizontalLines(),this.track(),this.explode())})}),this.horizontalLines.onChange(function(){typeof window.Designer!="undefined"?this.render(a,this.verticalLines(),this.horizontalLines(),this.track(),this.explode()):this.items.getCollection(function(b){this.update(this.chartType(),a,b,this.verticalLines(),this.horizontalLines(),this.track(),this.explode())})}),this.explode.onChange(function(){typeof window.Designer!="undefined"?this.render(a,this.verticalLines(),this.horizontalLines(),this.track(),this.explode()):this.items.getCollection(function(b){this.update(this.chartType(),a,b,this.verticalLines(),this.horizontalLines(),this.track(),this.explode())})});if(typeof window.Designer=="undefined"){var c=this;b.addListener("onCurrentElementChange",function(d){b.ID!=null&&c.chartType()=="pie"&&c.items.getCollection(function(d){c.updatepie(a,d,c.verticalLines(),c.horizontalLines(),c.track(),this.explode(),b.label)})})}this.items.onCollectionChange(function(b){if(!b.length){a.innerHTML="";return}this.update(this.chartType(),a,b,this.verticalLines(),this.horizontalLines(),this.track(),this.explode())})},render:function(a,b,c,d,e){if(this.chartType()=="pie"){var f=[[0,4]],g=[[0,3]],h=[[0,1.03]],i=[[0,3.5]],j=[{data:f,label:"Comedy"},{data:g,label:"Action"},{data:h,label:"Romance",pie:{explode:e+50}},{data:i,label:"Drama"}],k={HtmlText:!1,grid:{verticalLines:b,horizontalLines:c},xaxis:{showLabels:!1},yaxis:{showLabels:!1},pie:{show:!0,explode:e},mouse:{track:d},legend:{position:"se",backgroundColor:"#D2E8FF"}};o,o=Flotr.draw(a,j,k)}else{var l={label:"Actual",data:[[0,3],[1,8],[2,5],[3,5],[4,3],[5,9]]},m={label:"Target",data:[[0,8],[1,7],[2,8],[3,2],[4,4],[5,7]]},j=[l,m],n=[[0,"Statutory"],[1,"External"],[2,"Videos"],[3,"Yippy"],[4,"Management"],[5,"oops"]],k={radar:{show:!0},grid:{circular:!0,minorHorizontalLines:!0},yaxis:{min:0,max:10,minorTickFreq:2},xaxis:{ticks:n},mouse:{track:!0}},o;o=Flotr.draw(a,j,k)}},updatepie:function(a,b,c,d,e,f,g){var h=[],i=0;while(i<b.length)b[i].label==g?h.push({data:[[0,b[i].value]],label:b[i].label,pie:{explode:f+50}}):h.push({data:[[0,b[i].value]],label:b[i].label}),i++;Flotr.draw(a,h,{HtmlText:!1,grid:{verticalLines:c,horizontalLines:d},xaxis:{showLabels:!1},yaxis:{showLabels:!1},pie:{show:!0,explode:f},mouse:{track:e},legend:{position:"se",backgroundColor:"#D2E8FF"}})},updateradar:function(a,b){var c=[],d=[],e=0,f=0;while(e<b.length)b[e].value>f&&(f=b[e].value),c.push([e,b[e].value]),d.push([e,b[e].label]),e++;graph=Flotr.draw(a,[{label:a.id,data:c}],{radar:{show:!0},grid:{circular:!0,minorHorizontalLines:!0},yaxis:{min:0,max:f,minorTickFreq:2},xaxis:{ticks:d},mouse:{track:!0}})},update:function(a,b,c,d,e,f,g){switch(a){case"pie":this.updatepie(b,c,d,e,f,g);break;case"radar":this.updateradar(b,c);default:}}});return b})